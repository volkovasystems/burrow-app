<!DOCTYPE html>

<html lang="en" ng-appx="Burrow">
	<head>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
			
		<link rel="icon" type="image/ico" href="image/favicon.ico">

		<title>Burrow</title>

		<!--[if lt IE 9]>
		  <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
		  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->

		<!--: @include-style:"library/loading-bar.min.css" -->
	</head>
	<body>
		
		
		<!--: @include-script:"library/jquery.min.js" -->
		<!--: @include-script:"library/angular.min.js" -->
		<!--: @include-script:"library/react-with-addons.min.js" -->
		<!--: @include-script:"library/spin.js" -->
		<!--: @include-script:"library/jquery.spin.js" -->
		<!--: @include-script:"library/lodash.min.js" -->
		<!--: @include-script:"library/async.js" -->
		<!--: @include-script:"library/moment.js" -->
		<!--: @include-script:"library/math.min.js" -->
		<!--: @include-script:"library/string.min.js" -->
		<!--: @include-script:"library/pubsub.js" -->
		<!--: @include-script:"library/loading-bar.min.js" -->
		<!--: @include-script:"library/jquery.storage.js" -->
		<!--: @include-script:"library/jquery.cookie.js" -->
		<!--: @include-script:"library/socket.io.js" -->
		<!--: @include-script:"library/sha.js" -->
		<!--: @include-script:"library/uuid.js" -->

		<script type="text/javascript">
			var socket = io( "http://localhost:9000" );

			socket.on( "pair", 
				function onPair( pairID ) {
					if( _.isEmpty( pairID ) ){
						var pairID = ( new jsSHA( [ 
								uuid.v1( ), 
								uuid.v4( )
							].join( "-" ), "TEXT" ) )
							.getHash( "SHA-512", "HEX" );

						socket.emit( "pair", pairID );	
					
					}else{
						pairedSocket = io.connect( [
							"http://localhost:9000",
							pairID
						].join( "/" ) );

						pairedSocket.emit( "ping" );

						pairedSocket.on( "ping",
							function onPing( date ){
								console.log( "paired: " + pairID, date );
							} );
					}
				} );
		</script>
	</body>
</html>